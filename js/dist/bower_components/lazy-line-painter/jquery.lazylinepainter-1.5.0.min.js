(function(e,t,n){"use strict";var r="lazyLinePainter",i={init:function(t){return this.each(function(){var n=e(this),i=n.data(r);n.addClass("lazy-line");if(!i){var s=e.extend({width:null,height:null,strokeWidth:2,strokeColor:"#000",strokeOverColor:null,strokeCap:"round",strokeJoin:"round",strokeOpacity:1,arrowEnd:"none",strokeDash:null,onComplete:null,delay:null,overrideKey:null,drawSequential:!0,speedMultiplier:1,reverse:!1,responsive:!1},t),o=s.overrideKey?s.overrideKey:n.attr("id").replace("#",""),u=s.svgData[o].dimensions.width,a=s.svgData[o].dimensions.height;s.svgData=s.svgData[o].strokepath,s.width===null&&(s.width=u),s.height===null&&(s.height=a),s.responsive||n.css({width:s.width,height:s.height});var f=l({viewBox:"0 0 "+u+" "+a,preserveAspectRatio:"xMidYMid"});s.svg=e(f),n.append(s.svg),n.data(r,s)}})},paint:function(){return this.each(function(){var t=e(this),n=t.data(r),i=function(){n.paths=[],n.longestDuration=0,n.playhead=0;var e=0;for(var t=0;t<n.svgData.length;t++){var r=n.svgData[t].duration*n.speedMultiplier;e+=r}for(var t=0;t<n.svgData.length;t++){var i=a(n,t),s=i.getTotalLength();i.style.strokeDasharray=s+" "+s,i.style.strokeDashoffset=s,i.style.display="block",i.getBoundingClientRect();var r=n.svgData[t].duration*n.speedMultiplier;r>n.longestDuration&&(n.longestDuration=r);var u;n.reverse?(e-=r,u=e):u=n.playhead,n.paths.push({duration:r,drawStartTime:u,path:i,length:s}),n.playhead+=r}n.totalDuration=n.drawSequential?n.playhead:n.longestDuration,n.rAF=requestAnimationFrame(function(e){o(e,n)})};n.delay===null?i():setTimeout(i,n.delay)})},pauseResume:function(){return this.each(function(){var t=e(this).data(r);t.paused?(t.paused=!1,requestAnimationFrame(function(e){s(e,t)})):(t.paused=!0,cancelAnimationFrame(t.rAF))})},erase:function(){return this.each(function(){var t=e(this);t.removeData(r),t.find("svg").empty()})},destroy:function(){return this.each(function(){var t=e(this);t.removeData(r),t.remove()})}},s=function(e,t){t.startTime=e-t.elapsed_time,requestAnimationFrame(function(e){o(e,t)})},o=function(e,t){t.startTime==null&&(t.startTime=e),t.elapsed_time=e-t.startTime;for(var n=0;n<t.paths.length;n++){var r;t.drawSequential?(r=t.elapsed_time-t.paths[n].drawStartTime,r<0&&(r=0)):r=t.elapsed_time;if(r<t.paths[n].duration&&r>0){var i=r/t.paths[n].duration*t.paths[n].length;t.reverse||t.svgData[n].reverse?t.paths[n].path.style.strokeDashoffset=-t.paths[n].length+i:t.paths[n].path.style.strokeDashoffset=t.paths[n].length-i}else r>t.paths[n].duration&&(t.paths[n].path.style.strokeDashoffset=0)}t.elapsed_time<t.totalDuration?t.rAF=requestAnimationFrame(function(e){o(e,t)}):t.onComplete!=null&&t.onComplete()},u=function(e,t){var n={stroke:t.strokeColor?t.strokeColor:e.strokeColor,"fill-opacity":0,"stroke-dasharray":t.strokeDash?t.strokeDash:e.strokeDash,"stroke-opacity":t.strokeOpacity?t.strokeOpacity:e.strokeOpacity,"stroke-width":t.strokeWidth?t.strokeWidth:e.strokeWidth,"stroke-linecap":t.strokeCap?t.strokeCap:e.strokeCap,"stroke-linejoin":t.strokeJoin?t.strokeJoin:e.strokeJoin};return n},a=function(t,n){var r=document.createElementNS("http://www.w3.org/2000/svg","path"),i=e(r);return t.svg.append(i),i.attr(f(t,t.svgData[n])),r},f=function(e,t){var n={d:t.path,stroke:t.strokeColor?t.strokeColor:e.strokeColor,"fill-opacity":0,"stroke-dasharray":t.strokeDash?t.strokeDash:e.strokeDash,"stroke-opacity":t.strokeOpacity?t.strokeOpacity:e.strokeOpacity,"stroke-width":t.strokeWidth?t.strokeWidth:e.strokeWidth,"stroke-linecap":t.strokeCap?t.strokeCap:e.strokeCap,"stroke-linejoin":t.strokeJoin?t.strokeJoin:e.strokeJoin,"arrow-end":t.arrowEnd?t.arrowEnd:e.arrowEnd,markerWidth:"4",markerHeight:"3",orient:"auto"};return n},l=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttributeNS(null,"viewBox",e.viewBox),t.setAttributeNS(null,"preserveAspectRatio",e.preserveAspectRatio),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t};e.fn.lazylinepainter=function(e){if(i[e])return i[e].apply(this,Array.prototype.slice.call(arguments,1));if(typeof e=="object"||!e)return i.init.apply(this,arguments)}})(jQuery,window);